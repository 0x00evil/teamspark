<template name="sparks">
  {{>sparkFilter}}
  {{>sparkInput}}
  <div class="sparks">
    {{#each sparks}}
    {{>spark}}
    {{/each}}
  </div>
</template>

<template name="sparkFilter">
  <div class="navbar spark-controls">
    <div class="navbar-inner">
      <div class="container">
        <div class="nav-collapse collapse">
          <ul class="nav spark-list">
            {{#each types}}
            <li data-id="{{id}}" data-name="{{name}}"><a href="#"><i class="{{icon}}"></i>{{name}}</a></li>
            {{/each}}
          </ul>
          <ul class="nav pull-right">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-user"></i>作者 <b class="caret"></b></a>
              <ul class="dropdown-menu" id="filter-spark-author">
                <li data-id="" data-name=""><a href="#"><i class="{{isAuthorSelected all}}"></i> 全部</a></li>
                {{#each ts.members}}
                <li data-id="{{_id}}" data-name="{{username}}"><a href="#"><i class="{{isAuthorSelected _id}}"></i> {{username}}</a></li>
                {{/each}}
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-user"></i>责任人 <b class="caret"></b></a>
              <ul class="dropdown-menu" id="filter-spark-owner">
                <li data-id="" data-name=""><a href="#"><i class="{{isOwnerSelected all}}"></i>全部</a></li>
                {{#each ts.members}}
                <li data-id="{{_id}}" data-name="{{username}}"><a href="#"><i class="{{isOwnerSelected _id}}"></i>{{username}}</a></li>
                {{/each}}
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-list-ul"></i> <b class="caret"></b></a>
              <ul class="dropdown-menu" id="filter-spark-type">
                <li data-id="all" data-name=""><a href="#"><i class="{{isTypeSelected all}}"></i>全部</a></li>
                {{#each types}}
                <li data-id="{{id}}" data-name="{{name}}"><a href="#"><i class="{{isTypeSelected id}}"></i>{{name}}</a></li>
                {{/each}}
              </ul>
            </li>

          </ul>
        </div>
      </div>
    </div>
  </div>
</template>



<template name="spark">
  <div class="spark">
    <div class="avatar">
      <img class="avatar" src="{{author.avatar}}" alt="{{author.username}}" title="{{author.username}}" />
      <p><i class="{{typeObj.icon}} {{urgentStyle}} {{importantStyle}}" title="{{info}}"></i></p>
    </div>
    <div class="spark-container">
      <div class="title">
        <h5>
          <a href="#">{{author.username}}</a> 分享了一个{{typeObj.name}}
          <ul class="pull-right nav">
            <li><i class="icon-columns"></i></li>
            <li><i class="icon-trash"></i></li>
          </ul>
        </h5>
        <p>
          <span>{{created}}</span> |
          <span>{{project.name}}</span> |
          <span>最后更新: {{updated}}</span>
        </p>
      </div>
      <div class="content">
        <div class="modal-header">
          <h4>{{title}}</h4>
        </div>
        <div class="modal-body">
          <p>{{{content}}}</p>
        </div>
        <div class="modal-footer">
          <ul class="nav pull-left owners">
            {{#if currentOwner}}
              分配给：{{{showOwners}}}
            {{else}}
              <li><a href="#"><i class="icon-tasks"></i>分配</a></li>
            {{/if}}
          </ul>
          <ul class="nav pull-right">
            <li><a href="#"><i class="icon-comments-alt"></i>讨论</a></li>
            <li><a href="#"><i class="icon-heart"></i>赞同</a></li>
            <li><a href="#"><i class="icon-upload"></i>上传文件</a></li>
          </ul>
        </div>
      </div>
    </div>

  </div>
</template>